## Design Pattern ржХрж┐ ? 

**Design pattern** ржорж╛ржирзЗ рж╣рж▓рзЛ тАФ ржХрзЛржбржХрзЗ ржПржоржиржнрж╛ржмрзЗ рж╕рж╛ржЬрж╛ржирзЛ ржУ ржЧржаржи ржХрж░рж╛, ржпрж╛рждрзЗ рж╕рзЗржЯрж╛ maintainable, reusable, scalable ржПржмржВ readable рж╣рзЯред

ржПржЯрж╛ ржХрзЛржирзЛ **ready-made code** ржирж╛, ржмрж░ржВ **best practices** ржмрж╛ **architectural solution template**, ржпрзЗржЯрж╛ ржЖржорж░рж╛ ржмрж╛рж░ржмрж╛рж░ рж╕ржорж╕рзНржпрж╛ рж╕ржорж╛ржзрж╛ржи ржХрж░рж╛рж░ рж╕ржорзЯ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж┐ред

---

###  ржХрзЗржи ржжрж░ржХрж╛рж░?

Backend ржП ржЖржорж░рж╛ ржмрж╛рж░ржмрж╛рж░ ржХрж┐ржЫрзБ common рж╕ржорж╕рзНржпрж╛рж░ ржорзБржЦрзЛржорзБржЦрж┐ рж╣ржЗ:

* Data access ржХрж┐ржнрж╛ржмрзЗ handle ржХрж░ржмрзЛ?
* Request/Response flow ржХрж┐ржнрж╛ржмрзЗ рж╕рж╛ржЬрж╛ржмрзЛ?
* Business logic ржХрж┐ржнрж╛ржмрзЗ ржЖрж▓рж╛ржжрж╛ ржХрж░ржмрзЛ?
* Dependency ржХрж┐ржнрж╛ржмрзЗ manage ржХрж░ржмрзЛ?
* Scale ржХрж░рждрзЗ ржЧрзЗрж▓рзЗ ржХрзЛржерж╛рзЯ bottleneck рж╣ржмрзЗ?

ржПржЗ ржкрзНрж░рж╢рзНржиржЧрзБрж▓рзЛрж░ ржЙрждрзНрждрж░ **design pattern** ржжрж┐рзЯрзЗ рж╕рж╣ржЬ рж╣рзЯред

---

##  Commonly Used Design Patterns


### 1. **Singleton Pattern**

ЁЯСЙ ржПржХржЯрж╛ржЗ instance рждрзИрж░рж┐ рж╣ржмрзЗ, ржмрж╛рж░ржмрж╛рж░ ржирждрзБржи object рждрзИрж░рж┐ рж╣ржмрзЗ ржирж╛ред
**Use case**: Database connection pool, caching service (Redis client instance)ред

```ts
// Example in Node.js
class Database {
  private static instance: Database;
  private constructor() {}
  static getInstance() {
    if (!Database.instance) {
      Database.instance = new Database();
    }
    return Database.instance;
  }
}
```

---

### 2. **Factory Pattern**

ЁЯСЙ Object рждрзИрж░рж┐ ржХрж░рж╛рж░ ржжрж╛рзЯрж┐рждрзНржм ржЖрж▓рж╛ржжрж╛ factory class ржХрзЗ ржжрзЗржУрзЯрж╛ рж╣рзЯред
**Use case**: ржЖрж▓рж╛ржжрж╛ ржЖрж▓рж╛ржжрж╛ payment gateway (Stripe, PayPal, Bkash) handle ржХрж░рж╛ред

```ts
class PaymentFactory {
  static create(type: string) {
    if (type === "stripe") return new StripePayment();
    if (type === "paypal") return new PayPalPayment();
  }
}
```

---

### 3. **Repository Pattern**

ЁЯСЙ Database query logic ржХрзЗ ржЖрж▓рж╛ржжрж╛ repository class ржП рж░рж╛ржЦрж┐, ржпрж╛рждрзЗ business logic clean ржерж╛ржХрзЗред
**Use case**: NestJS/Express backend ржП UserRepository vs UserService separationред

```ts
class UserRepository {
  async findById(id: number) {
    return db.user.findUnique({ where: { id } });
  }
}

class UserService {
  constructor(private repo: UserRepository) {}
  async getProfile(id: number) {
    return this.repo.findById(id);
  }
}
```

---

### 4. **Observer / Pub-Sub Pattern**

ЁЯСЙ ржПржХржЯрж╛ event ржШржЯрж▓рзЗ subscriber ржЧрзБрж▓рзЛ notify ржкрж╛рзЯред
**Use case**: Order create рж╣рж▓рзЗ тЖТ Email ржкрж╛ржарж╛ржирзЛ, Notification trigger ржХрж░рж╛ред

```ts
eventEmitter.on("order_created", (data) => {
  sendEmail(data.user);
  pushNotification(data.user);
});
```

---

### 5. **Strategy Pattern**

ЁЯСЙ ржПржХ ржХрж╛ржЬрзЗрж░ ржЬржирзНржп ржПржХрж╛ржзрж┐ржХ algorithm ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрж╛рзЯред
**Use case**: ржмрж┐ржнрж┐ржирзНржи discount calculation logic apply ржХрж░рж╛ред

```ts
class DiscountContext {
  constructor(private strategy) {}
  calculate(amount) {
    return this.strategy.apply(amount);
  }
}
```

---

### 6. **CQRS (Command Query Responsibility Segregation)**

ЁЯСЙ Query (read) ржПржмржВ Command (write/update) logic ржЖрж▓рж╛ржжрж╛ ржХрж░рж╛ред
**Use case**: Large scale backend (e.g. Booking system)ред

---

### 7. **Decorator Pattern**

ЁЯСЙ ржПржХржЯрж┐ class/object ржПрж░ ржЙржкрж░рзЗ ржЕрждрж┐рж░рж┐ржХрзНржд feature ржпрзЛржЧ ржХрж░рж╛ред
**Use case**: Middleware system (authentication, logging)ред

```ts
function authMiddleware(handler) {
  return function (req, res) {
    if (!req.user) return res.status(401).send("Unauthorized");
    return handler(req, res);
  };
}
```

---

###  Summary

 design pattern basically:

* ржХрзЛржбржХрзЗ **clean ржПржмржВ scalable** рж░рж╛ржЦрж╛рж░ ржЙржкрж╛рзЯ
* **Business logic, data access, dependency, event flow** ржЖрж▓рж╛ржжрж╛ ржХрж░рж╛рж░ ржирж┐рзЯржо
* Large project ржП **team collaboration рж╕рж╣ржЬ** ржХрж░рж╛рж░ tool

---


## Practical Example  


### ЁЯУВ Backend Project Structure (NestJS Example)

```
src/
 тФЬтФАтФА main.ts
 тФЬтФАтФА app.module.ts
 тФЬтФАтФА modules/
 тФВ    тФЬтФАтФА user/
 тФВ    тФВ    тФЬтФАтФА user.controller.ts
 тФВ    тФВ    тФЬтФАтФА user.service.ts
 тФВ    тФВ    тФЬтФАтФА user.repository.ts
 тФВ    тФВ    тФЬтФАтФА user.entity.ts
 тФВ    тФВ    тФФтФАтФА dto/
 тФВ    тФЬтФАтФА booking/
 тФВ    тФВ    тФЬтФАтФА booking.controller.ts
 тФВ    тФВ    тФЬтФАтФА booking.service.ts
 тФВ    тФВ    тФЬтФАтФА booking.repository.ts
 тФВ    тФВ    тФЬтФАтФА booking.entity.ts
 тФВ    тФВ    тФФтФАтФА events/
 тФВ    тФВ         тФФтФАтФА booking.events.ts
 тФВ    тФЬтФАтФА payment/
 тФВ    тФВ    тФЬтФАтФА payment.controller.ts
 тФВ    тФВ    тФЬтФАтФА payment.service.ts
 тФВ    тФВ    тФЬтФАтФА strategies/
 тФВ    тФВ    тФВ    тФЬтФАтФА stripe.strategy.ts
 тФВ    тФВ    тФВ    тФЬтФАтФА paypal.strategy.ts
 тФВ    тФВ    тФВ    тФФтФАтФА bkash.strategy.ts
 тФВ    тФВ    тФФтФАтФА payment.factory.ts
 тФВ    тФФтФАтФА notification/
 тФВ         тФЬтФАтФА notification.service.ts
 тФВ         тФФтФАтФА observers/
 тФВ             тФЬтФАтФА email.observer.ts
 тФВ             тФФтФАтФА sms.observer.ts
 тФЬтФАтФА common/
 тФВ    тФЬтФАтФА middleware/
 тФВ    тФВ    тФФтФАтФА auth.middleware.ts
 тФВ    тФЬтФАтФА decorators/
 тФВ    тФВ    тФФтФАтФА roles.decorator.ts
 тФВ    тФФтФАтФА interceptors/
 тФВ         тФФтФАтФА logging.interceptor.ts
 тФФтФАтФА config/
      тФФтФАтФА database.config.ts
```

---

###  ржПржЦрж╛ржирзЗ ржХрзЛржи Design Pattern ржХрзЛржерж╛рзЯ Use рж╣рж▓рзЛ?

### 1. **Singleton Pattern**

* `database.config.ts` тЖТ Database connection ржПржХржмрж╛рж░ create рж╣рзЯрзЗ ржкрзБрж░рзЛ system ржП reuse рж╣рзЯред
* Redis client / Cache manager ржУ singleton рж╣рзЯред

---

### 2. **Repository Pattern**

* `user.repository.ts`, `booking.repository.ts`
  ЁЯСЙ Database access ржЖрж▓рж╛ржжрж╛ рж╣рзЯрзЗ ржЧрзЗрж▓рзЛ, рждрж╛ржЗ service/business logic clean ржерж╛ржХрзЗред

```ts
@Injectable()
export class UserRepository {
  constructor(private prisma: PrismaService) {}
  findById(id: number) {
    return this.prisma.user.findUnique({ where: { id } });
  }
}
```

---

### 3. **Service Layer Pattern**

* `user.service.ts`, `booking.service.ts`
  ЁЯСЙ рж╕ржм business logic ржПржЦрж╛ржирзЗ ржерж╛ржХрзЗред Controller рж╢рзБржзрзБ API request/response handle ржХрж░рзЗред

---

### 4. **Factory + Strategy Pattern**

* `payment.factory.ts` + `strategies/`
  ЁЯСЙ ржПржХрж╛ржзрж┐ржХ payment gateway handle ржХрж░рждрзЗред
  Factory decide ржХрж░ржмрзЗ ржХрзЛржи gateway use рж╣ржмрзЗ, ржЖрж░ Strategy pattern ржП gateway logic ржЖрж▓рж╛ржжрж╛ ржерж╛ржХржмрзЗред

```ts
class PaymentFactory {
  static create(method: string): PaymentStrategy {
    switch (method) {
      case "stripe": return new StripeStrategy();
      case "paypal": return new PaypalStrategy();
      case "bkash": return new BkashStrategy();
    }
  }
}
```

---

### 5. **Observer (Pub/Sub) Pattern**

* `booking.events.ts` тЖТ ржпржЦржи booking confirm рж╣рзЯ, рждржЦржи notification module automatically email/sms ржкрж╛ржарж╛ржмрзЗред

```ts
eventEmitter.emit("booking_confirmed", bookingData);
```

ржЖрж░ notification module:

```ts
eventEmitter.on("booking_confirmed", sendEmail);
eventEmitter.on("booking_confirmed", sendSMS);
```

---

### 6. **Decorator Pattern**

* `@Roles('admin')` тЖТ Custom decorator
* `auth.middleware.ts` тЖТ Middleware ржжрж┐рзЯрзЗ request decorate ржХрж░рж╛ рж╣рзЯ (user attach ржХрж░рж╛ рж╣рзЯ)ред

---

### 7. **CQRS Pattern (Optional, Large Scale ржП)**

ЁЯСЙ Booking module ржП read query (ржпрзЗржоржи available trips list) ржЖрж░ write command (ржпрзЗржоржи booking confirm ржХрж░рж╛) ржЖрж▓рж╛ржжрж╛ service/class ржП split ржХрж░рж╛ ржпрж╛рзЯред

---

### 8. **Interceptor Pattern**

* `logging.interceptor.ts` тЖТ ржкрзНрж░рждрж┐ржЯрж┐ request ржПрж░ рж╕ржорзЯ рж▓ржЧ collect ржХрж░рж╛ред
* Error handling interceptor ржУ ржХрж░рж╛ ржпрж╛рзЯред

---

### Final Flow (Example: A User Books a Trip)

1. User request тЖТ `BookingController`
2. Controller тЖТ `BookingService`
3. Service тЖТ `BookingRepository` ржерзЗржХрзЗ data access
4. Booking confirm рж╣рж▓рзЗ тЖТ `eventEmitter` trigger тЖТ `NotificationService` (Observer pattern)
5. Payment рж╣рж▓рзЗ тЖТ `PaymentFactory` тЖТ relevant strategy (Stripe/Paypal/Bkash) use ржХрж░ржмрзЗ
6. Middleware & Decorator automatically security/logging handle ржХрж░ржмрзЗ

---

тЪбржПржЗржнрж╛ржмрзЗ ржжрзЗржЦрж▓рзЗ ржмрзБржЭрждрзЗ ржкрж╛рж░рзЛ тАФ **Design Pattern ржЧрзБрж▓рзЛ ржЖрж▓рж╛ржжрж╛ ржЖрж▓рж╛ржжрж╛ ржЬрж╛рзЯржЧрж╛рзЯ naturally ржмрж╕рзЗ ржпрж╛рзЯ** ржпржЦржи ржЖржорж░рж╛ ржПржХржЯрж╛ structured backend ржмрж╛ржирж╛ржЗред

---

